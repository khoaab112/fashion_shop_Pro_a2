-- public.administration definition

-- Drop table

-- DROP TABLE public.administration;

CREATE TABLE public.administration (
	id serial4 NOT NULL,
	"name" varchar(50) NOT NULL, -- tên
	authority _varchar NOT NULL, -- ds các quyền dc quản lý
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT administration_pkey PRIMARY KEY (id)
);
COMMENT ON TABLE public.administration IS 'tên các cấp độ quản lý';

-- Column comments

COMMENT ON COLUMN public.administration."name" IS 'tên';
COMMENT ON COLUMN public.administration.authority IS 'ds các quyền dc quản lý';

-- Permissions

ALTER TABLE public.administration OWNER TO postgres;
GRANT ALL ON TABLE public.administration TO postgres;


-- public.approval_process definition

-- Drop table

-- DROP TABLE public.approval_process;

CREATE TABLE public.approval_process (
	id serial4 NOT NULL,
	"name" varchar(50) NULL, -- tên quy trình
	logo varchar(50) NULL,
	"location" int4 NULL, -- thứ tự yêu tiên
	account_used _varchar NULL, -- ds cấp tài khoản dc duyệt
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT approval_process_pk PRIMARY KEY (id)
);
COMMENT ON TABLE public.approval_process IS 'quy trình duyệt';

-- Column comments

COMMENT ON COLUMN public.approval_process."name" IS 'tên quy trình';
COMMENT ON COLUMN public.approval_process."location" IS 'thứ tự yêu tiên';
COMMENT ON COLUMN public.approval_process.account_used IS 'ds cấp tài khoản dc duyệt';

-- Permissions

ALTER TABLE public.approval_process OWNER TO postgres;
GRANT ALL ON TABLE public.approval_process TO postgres;


-- public.branch definition

-- Drop table

-- DROP TABLE public.branch;

CREATE TABLE public.branch (
	id serial4 NOT NULL,
	"name" varchar(50) NOT NULL, -- tên chi nhánh
	address varchar(200) NOT NULL, -- địa chỉ
	hotline varchar(20) NOT NULL, -- sdt
	manage varchar(50) NOT NULL, -- người quản lý
	working_time _varchar NULL, -- thời gian làm việc
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT branch_pkey PRIMARY KEY (id)
);
COMMENT ON TABLE public.branch IS 'chi nhánh';

-- Column comments

COMMENT ON COLUMN public.branch."name" IS 'tên chi nhánh';
COMMENT ON COLUMN public.branch.address IS 'địa chỉ';
COMMENT ON COLUMN public.branch.hotline IS 'sdt';
COMMENT ON COLUMN public.branch.manage IS 'người quản lý';
COMMENT ON COLUMN public.branch.working_time IS 'thời gian làm việc';

-- Permissions

ALTER TABLE public.branch OWNER TO postgres;
GRANT ALL ON TABLE public.branch TO postgres;


-- public.contact_support definition

-- Drop table

-- DROP TABLE public.contact_support;

CREATE TABLE public.contact_support (
	id serial4 NOT NULL,
	"name" varchar(50) NULL, -- tên
	logo varchar(50) NULL, -- link img
	link varchar(50) NULL, -- link đến
	"location" int4 NULL, -- thứu tự
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT contact_support_pk PRIMARY KEY (id)
);
COMMENT ON TABLE public.contact_support IS 'các mục hỗ trợ (show ở góc phải màn hình)';

-- Column comments

COMMENT ON COLUMN public.contact_support."name" IS 'tên';
COMMENT ON COLUMN public.contact_support.logo IS 'link img';
COMMENT ON COLUMN public.contact_support.link IS 'link đến';
COMMENT ON COLUMN public.contact_support."location" IS 'thứu tự';

-- Permissions

ALTER TABLE public.contact_support OWNER TO postgres;
GRANT ALL ON TABLE public.contact_support TO postgres;


-- public.log_login definition

-- Drop table

-- DROP TABLE public.log_login;

CREATE TABLE public.log_login (
	id serial4 NOT NULL,
	user_id varchar(50) NULL, -- mã người đăng nhập
	"admin" bool NULL, -- 0:khách hang¶1: bên nv
	"content" varchar(50) NULL,
	ip varchar(50) NULL,
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT log_login_pk PRIMARY KEY (id)
);
COMMENT ON TABLE public.log_login IS 'lịch sử đăng nhập';

-- Column comments

COMMENT ON COLUMN public.log_login.user_id IS 'mã người đăng nhập';
COMMENT ON COLUMN public.log_login."admin" IS '0:khách hang
1: bên nv';

-- Permissions

ALTER TABLE public.log_login OWNER TO postgres;
GRANT ALL ON TABLE public.log_login TO postgres;


-- public.menu_main definition

-- Drop table

-- DROP TABLE public.menu_main;

CREATE TABLE public.menu_main (
	id serial4 NOT NULL,
	"name" varchar(50) NOT NULL, -- tên menu
	color _varchar NULL, -- màu
	is_sub_menu bool NULL, -- có menu con ko
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT menu_main_pkey PRIMARY KEY (id)
);
COMMENT ON TABLE public.menu_main IS 'menu chính';

-- Column comments

COMMENT ON COLUMN public.menu_main."name" IS 'tên menu';
COMMENT ON COLUMN public.menu_main.color IS 'màu';
COMMENT ON COLUMN public.menu_main.is_sub_menu IS 'có menu con ko';

-- Permissions

ALTER TABLE public.menu_main OWNER TO postgres;
GRANT ALL ON TABLE public.menu_main TO postgres;


-- public.online_payment_services definition

-- Drop table

-- DROP TABLE public.online_payment_services;

CREATE TABLE public.online_payment_services (
	id serial4 NOT NULL,
	"name" varchar(50) NOT NULL, -- tên dv
	logo varchar(50) NOT NULL, -- logo dv
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT online_payment_services_pkey PRIMARY KEY (id)
);
COMMENT ON TABLE public.online_payment_services IS 'các dịch vụ thanh toán online';

-- Column comments

COMMENT ON COLUMN public.online_payment_services."name" IS 'tên dv';
COMMENT ON COLUMN public.online_payment_services.logo IS 'logo dv';

-- Permissions

ALTER TABLE public.online_payment_services OWNER TO postgres;
GRANT ALL ON TABLE public.online_payment_services TO postgres;


-- public.payment_methods definition

-- Drop table

-- DROP TABLE public.payment_methods;

CREATE TABLE public.payment_methods (
	id serial4 NOT NULL,
	"name" varchar(50) NOT NULL, -- tên phương thức thanh toán
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT payment_methods_pkey PRIMARY KEY (id)
);
COMMENT ON TABLE public.payment_methods IS 'phương thức thanh toán';

-- Column comments

COMMENT ON COLUMN public.payment_methods."name" IS 'tên phương thức thanh toán';

-- Permissions

ALTER TABLE public.payment_methods OWNER TO postgres;
GRANT ALL ON TABLE public.payment_methods TO postgres;


-- public."policy" definition

-- Drop table

-- DROP TABLE public."policy";

CREATE TABLE public."policy" (
	id serial4 NOT NULL,
	"name" varchar(50) NULL, -- tên chính sách
	img varchar(50) NULL, -- link img
	"content" varchar(500) NULL, -- nội dung
	"location" int4 NULL, -- thứ tự yêu tiên
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT policy_pkey PRIMARY KEY (id)
);
COMMENT ON TABLE public."policy" IS 'chính sách cho sản phẩm (đổi trả ...)';

-- Column comments

COMMENT ON COLUMN public."policy"."name" IS 'tên chính sách';
COMMENT ON COLUMN public."policy".img IS 'link img';
COMMENT ON COLUMN public."policy"."content" IS 'nội dung';
COMMENT ON COLUMN public."policy"."location" IS 'thứ tự yêu tiên';

-- Permissions

ALTER TABLE public."policy" OWNER TO postgres;
GRANT ALL ON TABLE public."policy" TO postgres;


-- public."position" definition

-- Drop table

-- DROP TABLE public."position";

CREATE TABLE public."position" (
	id serial4 NOT NULL,
	"name" varchar(50) NOT NULL, -- tên chức vụ
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT position_pkey PRIMARY KEY (id)
);
COMMENT ON TABLE public."position" IS 'chức vụ nhân viên';

-- Column comments

COMMENT ON COLUMN public."position"."name" IS 'tên chức vụ';

-- Permissions

ALTER TABLE public."position" OWNER TO postgres;
GRANT ALL ON TABLE public."position" TO postgres;


-- public.products definition

-- Drop table

-- DROP TABLE public.products;

CREATE TABLE public.products (
	id serial4 NOT NULL,
	sub_menu_id int4 NOT NULL, -- thuộc menu con nào
	code_products varchar(50) NULL, -- mã sp
	"name" varchar(50) NOT NULL, -- tên sp
	img_main varchar(50) NULL, -- ảnh sp
	origin varchar(50) NULL, -- suất xứ
	color varchar(50) NULL, -- màu
	"size" varchar(50) NULL, -- kích thước
	amount int4 NOT NULL, -- số tiền
	policy_id _varchar NULL, -- các chính sách
	quantity int4 NULL, -- số lượng còn
	vote float8 NULL, -- số bình chọn
	intro varchar(500) NOT NULL, -- giới thiệu
	reduction_amount int4 NULL, -- số tiền giảm khi có giảm giá
	on_sale bool NULL,
	info_sale varchar(200) NULL,
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	percentage_reduction int8 NULL DEFAULT 0, -- giảm tỷ lệ phần trăm khi có giảm giá
	number_votes int8 NULL DEFAULT 0, -- số người tham gia bình chọn
	discussion_participants int8 NULL DEFAULT 0, -- số bình luận
	CONSTRAINT products_pkey PRIMARY KEY (id)
);

-- Column comments

COMMENT ON COLUMN public.products.sub_menu_id IS 'thuộc menu con nào';
COMMENT ON COLUMN public.products.code_products IS 'mã sp';
COMMENT ON COLUMN public.products."name" IS 'tên sp';
COMMENT ON COLUMN public.products.img_main IS 'ảnh sp';
COMMENT ON COLUMN public.products.origin IS 'suất xứ';
COMMENT ON COLUMN public.products.color IS 'màu';
COMMENT ON COLUMN public.products."size" IS 'kích thước';
COMMENT ON COLUMN public.products.amount IS 'số tiền';
COMMENT ON COLUMN public.products.policy_id IS 'các chính sách';
COMMENT ON COLUMN public.products.quantity IS 'số lượng còn';
COMMENT ON COLUMN public.products.vote IS 'số bình chọn';
COMMENT ON COLUMN public.products.intro IS 'giới thiệu';
COMMENT ON COLUMN public.products.reduction_amount IS 'số tiền giảm khi có giảm giá';
COMMENT ON COLUMN public.products.percentage_reduction IS 'giảm tỷ lệ phần trăm khi có giảm giá';
COMMENT ON COLUMN public.products.number_votes IS 'số người tham gia bình chọn';
COMMENT ON COLUMN public.products.discussion_participants IS 'số bình luận';

-- Permissions

ALTER TABLE public.products OWNER TO postgres;
GRANT ALL ON TABLE public.products TO postgres;


-- public."rank" definition

-- Drop table

-- DROP TABLE public."rank";

CREATE TABLE public."rank" (
	id serial4 NOT NULL,
	"name" varchar(50) NOT NULL, -- tên
	detail varchar(200) NULL, -- miêu tả chi tiết
	icon varchar(50) NULL, -- img_icon
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT rank_pkey PRIMARY KEY (id)
);
COMMENT ON TABLE public."rank" IS 'tên các cấp độ người dùng';

-- Column comments

COMMENT ON COLUMN public."rank"."name" IS 'tên';
COMMENT ON COLUMN public."rank".detail IS 'miêu tả chi tiết';
COMMENT ON COLUMN public."rank".icon IS 'img_icon';

-- Permissions

ALTER TABLE public."rank" OWNER TO postgres;
GRANT ALL ON TABLE public."rank" TO postgres;


-- public.report_source definition

-- Drop table

-- DROP TABLE public.report_source;

CREATE TABLE public.report_source (
	id serial4 NOT NULL,
	"name" varchar(50) NULL,
	note varchar(200) NULL,
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT report_source_pk PRIMARY KEY (id)
);
COMMENT ON TABLE public.report_source IS 'nguồn tố cáo / mxh , nhân viên , abc..';

-- Permissions

ALTER TABLE public.report_source OWNER TO postgres;
GRANT ALL ON TABLE public.report_source TO postgres;


-- public.service definition

-- Drop table

-- DROP TABLE public.service;

CREATE TABLE public.service (
	id serial4 NOT NULL,
	service_name varchar(50) NOT NULL, -- tên service
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT service_pkey PRIMARY KEY (id)
);
COMMENT ON TABLE public.service IS 'tên các dịch vụ tk bên thứ 3';

-- Column comments

COMMENT ON COLUMN public.service.service_name IS 'tên service';

-- Permissions

ALTER TABLE public.service OWNER TO postgres;
GRANT ALL ON TABLE public.service TO postgres;


-- public.shipping_method definition

-- Drop table

-- DROP TABLE public.shipping_method;

CREATE TABLE public.shipping_method (
	id serial4 NOT NULL,
	"name" varchar(50) NOT NULL, -- tên phương thức nhận hàng
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT shipping_method_pkey PRIMARY KEY (id)
);
COMMENT ON TABLE public.shipping_method IS 'phương thức nhận hàng';

-- Column comments

COMMENT ON COLUMN public.shipping_method."name" IS 'tên phương thức nhận hàng';

-- Permissions

ALTER TABLE public.shipping_method OWNER TO postgres;
GRANT ALL ON TABLE public.shipping_method TO postgres;


-- public.slideshow_ads definition

-- Drop table

-- DROP TABLE public.slideshow_ads;

CREATE TABLE public.slideshow_ads (
	id serial4 NOT NULL,
	"name" varchar(50) NOT NULL,
	url varchar(200) NULL,
	private_post varchar(20) NULL,
	"type" int2 NOT NULL,
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT slideshow_ads_pkey PRIMARY KEY (id)
);
COMMENT ON TABLE public.slideshow_ads IS 'bảng này nên test lại';

-- Permissions

ALTER TABLE public.slideshow_ads OWNER TO postgres;
GRANT ALL ON TABLE public.slideshow_ads TO postgres;


-- public.type_ads definition

-- Drop table

-- DROP TABLE public.type_ads;

CREATE TABLE public.type_ads (
	id serial4 NOT NULL,
	"name" varchar(50) NULL,
	note varchar(200) NULL,
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT type_ads_pk PRIMARY KEY (id)
);
COMMENT ON TABLE public.type_ads IS 'loại quản cáo';

-- Permissions

ALTER TABLE public.type_ads OWNER TO postgres;
GRANT ALL ON TABLE public.type_ads TO postgres;


-- public.type_log_update definition

-- Drop table

-- DROP TABLE public.type_log_update;

CREATE TABLE public.type_log_update (
	id serial4 NOT NULL,
	"name" varchar(50) NULL, -- tên loại cập nhật
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT type_log_update_pk PRIMARY KEY (id)
);
COMMENT ON TABLE public.type_log_update IS 'loại cập nhật data';

-- Column comments

COMMENT ON COLUMN public.type_log_update."name" IS 'tên loại cập nhật';

-- Permissions

ALTER TABLE public.type_log_update OWNER TO postgres;
GRANT ALL ON TABLE public.type_log_update TO postgres;


-- public.type_report definition

-- Drop table

-- DROP TABLE public.type_report;

CREATE TABLE public.type_report (
	id serial4 NOT NULL,
	"name" varchar(50) NULL, -- tên kiểu báo cáo
	note varchar(200) NULL,
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT type_report_pk PRIMARY KEY (id)
);
COMMENT ON TABLE public.type_report IS 'loại báo cáo';

-- Column comments

COMMENT ON COLUMN public.type_report."name" IS 'tên kiểu báo cáo';

-- Permissions

ALTER TABLE public.type_report OWNER TO postgres;
GRANT ALL ON TABLE public.type_report TO postgres;


-- public.customers definition

-- Drop table

-- DROP TABLE public.customers;

CREATE TABLE public.customers (
	id serial4 NOT NULL,
	rank_id int2 NOT NULL DEFAULT '0'::smallint, -- thứ hàng kh
	"name" varchar(50) NOT NULL, -- tên
	address varchar(50) NOT NULL, -- địa chỉ
	phone_number varchar(20) NOT NULL, -- sdt kh , cũng là mã kh
	age int2 NULL,
	sex bool NULL, -- gioi tinh
	accumulated_points int2 NULL DEFAULT '1'::smallint, -- số điểm tích lũy
	favorite_product _varchar NULL, -- ds sản phẩm
	number_ban int2 NULL DEFAULT '0'::smallint, -- số lần bị khóa tk
	potential bool NULL DEFAULT true, -- 0: ko phải kh tiềm năng / đây là kh đã mua sp¶1: kh tiềm năng/ khi kh đăng ký thông tin mà chưa mua sp thì là kh tiềm năng
	discount_code_id _varchar NULL, -- ds mã giảm giá
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	status bool NULL DEFAULT true,
	CONSTRAINT customers_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_customers" FOREIGN KEY (rank_id) REFERENCES public."rank"(id) ON UPDATE CASCADE
);
COMMENT ON TABLE public.customers IS 'danh sách khách hàng';

-- Column comments

COMMENT ON COLUMN public.customers.rank_id IS 'thứ hàng kh';
COMMENT ON COLUMN public.customers."name" IS 'tên';
COMMENT ON COLUMN public.customers.address IS 'địa chỉ';
COMMENT ON COLUMN public.customers.phone_number IS 'sdt kh , cũng là mã kh';
COMMENT ON COLUMN public.customers.sex IS 'gioi tinh';
COMMENT ON COLUMN public.customers.accumulated_points IS 'số điểm tích lũy';
COMMENT ON COLUMN public.customers.favorite_product IS 'ds sản phẩm';
COMMENT ON COLUMN public.customers.number_ban IS 'số lần bị khóa tk';
COMMENT ON COLUMN public.customers.potential IS '0: ko phải kh tiềm năng / đây là kh đã mua sp
1: kh tiềm năng/ khi kh đăng ký thông tin mà chưa mua sp thì là kh tiềm năng';
COMMENT ON COLUMN public.customers.discount_code_id IS 'ds mã giảm giá';

-- Permissions

ALTER TABLE public.customers OWNER TO postgres;
GRANT ALL ON TABLE public.customers TO postgres;


-- public.img_products definition

-- Drop table

-- DROP TABLE public.img_products;

CREATE TABLE public.img_products (
	id serial4 NOT NULL,
	product_id int4 NOT NULL, -- mã sp
	img varchar(50) NOT NULL, -- ảnh
	"location" int4 NULL, -- vị trí ảnh
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT img_products_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_img_products" FOREIGN KEY (product_id) REFERENCES public.products(id)
);
COMMENT ON TABLE public.img_products IS 'ảnh sp';

-- Column comments

COMMENT ON COLUMN public.img_products.product_id IS 'mã sp';
COMMENT ON COLUMN public.img_products.img IS 'ảnh';
COMMENT ON COLUMN public.img_products."location" IS 'vị trí ảnh';

-- Permissions

ALTER TABLE public.img_products OWNER TO postgres;
GRANT ALL ON TABLE public.img_products TO postgres;


-- public.log_deletes definition

-- Drop table

-- DROP TABLE public.log_deletes;

CREATE TABLE public.log_deletes (
	id serial4 NOT NULL,
	type_delete int4 NULL, -- loại xóa
	user_delete int4 NULL, -- người xóa
	internal bool NULL, -- 1: nv / 0: kh
	"content" _varchar NULL,
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT log_deletes_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_log_delete" FOREIGN KEY (type_delete) REFERENCES public.type_log_update(id)
);

-- Column comments

COMMENT ON COLUMN public.log_deletes.type_delete IS 'loại xóa';
COMMENT ON COLUMN public.log_deletes.user_delete IS 'người xóa';
COMMENT ON COLUMN public.log_deletes.internal IS '1: nv / 0: kh';

-- Permissions

ALTER TABLE public.log_deletes OWNER TO postgres;
GRANT ALL ON TABLE public.log_deletes TO postgres;


-- public.log_updates definition

-- Drop table

-- DROP TABLE public.log_updates;

CREATE TABLE public.log_updates (
	id serial4 NOT NULL,
	type_update_id int4 NULL, -- loại update
	user_update int4 NULL, -- người update
	internal bool NULL, -- 1: nv / 0 :kh
	"content" _varchar NOT NULL,
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT log_updates_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_log_update" FOREIGN KEY (type_update_id) REFERENCES public.type_log_update(id)
);
COMMENT ON TABLE public.log_updates IS 'lịch sử đăng nhạp ,dùng cho cả kh và nv';

-- Column comments

COMMENT ON COLUMN public.log_updates.type_update_id IS 'loại update';
COMMENT ON COLUMN public.log_updates.user_update IS 'người update';
COMMENT ON COLUMN public.log_updates.internal IS '1: nv / 0 :kh';

-- Permissions

ALTER TABLE public.log_updates OWNER TO postgres;
GRANT ALL ON TABLE public.log_updates TO postgres;


-- public.staff definition

-- Drop table

-- DROP TABLE public.staff;

CREATE TABLE public.staff (
	id serial4 NOT NULL,
	code_staff varchar(50) NOT NULL, -- mã nv
	position_id int4 NOT NULL, -- mã chức vụ
	admin_id int4 NULL, -- cấp độ tk
	branch_id int4 NULL, -- mã chi nhánh
	approval_process_id _varchar NULL, -- các quy trình được duyệt
	"name" varchar(50) NOT NULL, -- tên nv
	address varchar(50) NOT NULL, -- địa chỉ
	phone_number varchar(20) NOT NULL,
	age int4 NOT NULL,
	sex bool NULL,
	img varchar(50) NULL, -- ảnh nv
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT staff_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_staff" FOREIGN KEY (position_id) REFERENCES public."position"(id) ON UPDATE CASCADE,
	CONSTRAINT "FK2_staff" FOREIGN KEY (admin_id) REFERENCES public.administration(id),
	CONSTRAINT "FK3_staff" FOREIGN KEY (branch_id) REFERENCES public.branch(id)
);
COMMENT ON TABLE public.staff IS 'ds nhân viên';

-- Column comments

COMMENT ON COLUMN public.staff.code_staff IS 'mã nv';
COMMENT ON COLUMN public.staff.position_id IS 'mã chức vụ';
COMMENT ON COLUMN public.staff.admin_id IS 'cấp độ tk';
COMMENT ON COLUMN public.staff.branch_id IS 'mã chi nhánh';
COMMENT ON COLUMN public.staff.approval_process_id IS 'các quy trình được duyệt';
COMMENT ON COLUMN public.staff."name" IS 'tên nv';
COMMENT ON COLUMN public.staff.address IS 'địa chỉ';
COMMENT ON COLUMN public.staff.img IS 'ảnh nv';

-- Permissions

ALTER TABLE public.staff OWNER TO postgres;
GRANT ALL ON TABLE public.staff TO postgres;


-- public.sub_menu definition

-- Drop table

-- DROP TABLE public.sub_menu;

CREATE TABLE public.sub_menu (
	id serial4 NOT NULL,
	menu_main_id int4 NOT NULL, -- là con của menu main nào
	"name" varchar(50) NOT NULL, -- tên
	color _varchar NULL, -- màu
	is_sub bool NULL,
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	"order" int4 NULL DEFAULT 1,
	CONSTRAINT sub_menu_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_sub_menu" FOREIGN KEY (menu_main_id) REFERENCES public.menu_main(id) ON UPDATE CASCADE
);
COMMENT ON TABLE public.sub_menu IS 'menu con';

-- Column comments

COMMENT ON COLUMN public.sub_menu.menu_main_id IS 'là con của menu main nào';
COMMENT ON COLUMN public.sub_menu."name" IS 'tên';
COMMENT ON COLUMN public.sub_menu.color IS 'màu';

-- Permissions

ALTER TABLE public.sub_menu OWNER TO postgres;
GRANT ALL ON TABLE public.sub_menu TO postgres;


-- public.total_payments definition

-- Drop table

-- DROP TABLE public.total_payments;

CREATE TABLE public.total_payments (
	id serial4 NOT NULL,
	customers_id int2 NULL, -- mã kh
	total_money int8 NOT NULL DEFAULT '0'::bigint, -- tổng số tiền đã chi ra
	save_money int4 NOT NULL DEFAULT 0, -- số tiền tiết kiệp được
	products _varchar NULL, -- danh sách sản phẩm
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT total_payments_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_total_payments" FOREIGN KEY (customers_id) REFERENCES public.customers(id) ON UPDATE CASCADE
);
COMMENT ON TABLE public.total_payments IS 'Số tiền khách hàng đã bỏ ra , ds sach sản phẩm kh đã mua(test)';

-- Column comments

COMMENT ON COLUMN public.total_payments.customers_id IS 'mã kh';
COMMENT ON COLUMN public.total_payments.total_money IS 'tổng số tiền đã chi ra';
COMMENT ON COLUMN public.total_payments.save_money IS 'số tiền tiết kiệp được';
COMMENT ON COLUMN public.total_payments.products IS 'danh sách sản phẩm';

-- Permissions

ALTER TABLE public.total_payments OWNER TO postgres;
GRANT ALL ON TABLE public.total_payments TO postgres;


-- public.warehouse definition

-- Drop table

-- DROP TABLE public.warehouse;

CREATE TABLE public.warehouse (
	id serial4 NOT NULL,
	product_id int4 NOT NULL, -- tên sản phẩm
	remaining int4 NOT NULL, -- còn lại trong kho
	import_price int4 NULL, -- giá nhập
	export_price int4 NULL, -- giá bán
	product_by_color json NULL, -- sản phẩm theo màu
	products_by_branch json NULL, -- sản phẩm theo chi nhánh
	xs int4 NULL, -- theo sỉze
	s int4 NULL,
	m int4 NULL,
	l int4 NULL,
	xl int4 NULL,
	xxl int4 NULL,
	"comment" _varchar NULL,
	status bool NOT NULL DEFAULT true,
	created_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT warehouse_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_warehouse" FOREIGN KEY (product_id) REFERENCES public.products(id)
);
COMMENT ON TABLE public.warehouse IS 'kho';

-- Column comments

COMMENT ON COLUMN public.warehouse.product_id IS 'tên sản phẩm';
COMMENT ON COLUMN public.warehouse.remaining IS 'còn lại trong kho';
COMMENT ON COLUMN public.warehouse.import_price IS 'giá nhập';
COMMENT ON COLUMN public.warehouse.export_price IS 'giá bán';
COMMENT ON COLUMN public.warehouse.product_by_color IS 'sản phẩm theo màu';
COMMENT ON COLUMN public.warehouse.products_by_branch IS 'sản phẩm theo chi nhánh';
COMMENT ON COLUMN public.warehouse.xs IS 'theo sỉze';

-- Permissions

ALTER TABLE public.warehouse OWNER TO postgres;
GRANT ALL ON TABLE public.warehouse TO postgres;


-- public.account_customers definition

-- Drop table

-- DROP TABLE public.account_customers;

CREATE TABLE public.account_customers (
	id serial4 NOT NULL,
	customers_id int2 NOT NULL, -- id kh
	link_service _varchar NULL, -- các tk link tới
	"user" varchar(20) NOT NULL, -- tên đang nhập
	"password" varchar(20) NOT NULL, -- mk
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT account_customers_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_account_customers" FOREIGN KEY (customers_id) REFERENCES public.customers(id)
);
COMMENT ON TABLE public.account_customers IS 'tài khoản khách hàng';

-- Column comments

COMMENT ON COLUMN public.account_customers.customers_id IS 'id kh';
COMMENT ON COLUMN public.account_customers.link_service IS 'các tk link tới';
COMMENT ON COLUMN public.account_customers."user" IS 'tên đang nhập';
COMMENT ON COLUMN public.account_customers."password" IS 'mk';

-- Permissions

ALTER TABLE public.account_customers OWNER TO postgres;
GRANT ALL ON TABLE public.account_customers TO postgres;


-- public.account_service definition

-- Drop table

-- DROP TABLE public.account_service;

CREATE TABLE public.account_service (
	id serial4 NOT NULL,
	service_id int2 NOT NULL, -- id dịch vụ
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	customer_id int4 NULL DEFAULT 0, -- 0
	CONSTRAINT account_service_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_account_service" FOREIGN KEY (service_id) REFERENCES public.service(id) ON UPDATE CASCADE,
	CONSTRAINT account_service_fk FOREIGN KEY (customer_id) REFERENCES public.customers(id) ON DELETE CASCADE
);
COMMENT ON TABLE public.account_service IS 'tài khoản bên thứ 3 ';

-- Column comments

COMMENT ON COLUMN public.account_service.service_id IS 'id dịch vụ';
COMMENT ON COLUMN public.account_service.customer_id IS '0';

-- Permissions

ALTER TABLE public.account_service OWNER TO postgres;
GRANT ALL ON TABLE public.account_service TO postgres;


-- public.ads definition

-- Drop table

-- DROP TABLE public.ads;

CREATE TABLE public.ads (
	id serial4 NOT NULL,
	"name" varchar(50) NULL,
	staff_id int4 NOT NULL, -- nv tạo quản cáo
	img varchar(50) NULL, -- link ảnh
	"content" varchar(500) NULL, -- nội dung quản cáo
	"location" int4 NULL, -- ưu tiên. vị trí
	ls_sub_menu_id _varchar NULL, -- thuộc menu các con nào
	gift_id _varchar NULL, -- có các mã giảm giá nào
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT ads_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_ads" FOREIGN KEY (staff_id) REFERENCES public.staff(id)
);
COMMENT ON TABLE public.ads IS 'quản cáo';

-- Column comments

COMMENT ON COLUMN public.ads.staff_id IS 'nv tạo quản cáo';
COMMENT ON COLUMN public.ads.img IS 'link ảnh';
COMMENT ON COLUMN public.ads."content" IS 'nội dung quản cáo';
COMMENT ON COLUMN public.ads."location" IS 'ưu tiên. vị trí';
COMMENT ON COLUMN public.ads.ls_sub_menu_id IS 'thuộc menu các con nào';
COMMENT ON COLUMN public.ads.gift_id IS 'có các mã giảm giá nào';

-- Permissions

ALTER TABLE public.ads OWNER TO postgres;
GRANT ALL ON TABLE public.ads TO postgres;


-- public.bill definition

-- Drop table

-- DROP TABLE public.bill;

CREATE TABLE public.bill (
	id serial4 NOT NULL,
	code_bill varchar(50) NOT NULL, -- mã hóa đơn
	staff_id int2 NOT NULL, -- mã nhân viên
	customers_id int2 NOT NULL, -- mã kh
	branch_id int2 NOT NULL, -- mã chi nhánh
	payment_methods_id _varchar NOT NULL, -- id phương thức thanh toán
	shipping_method_id int4 NULL DEFAULT 0, -- id pt nhận hàng
	online_payment_id varchar(20) NULL DEFAULT 0, -- id ngân hàng thanh toán
	list_products _varchar NOT NULL, -- ds sp
	initial_amount int4 NOT NULL, -- số tiền gốc
	actual_amount int4 NOT NULL, -- số tiền phải trả
	giftcode_id _varchar NULL, -- id mã giảm giá
	successful_payment bool NULL, -- đã thanh toán
	note_staff varchar(200) NULL, -- ghi chú cho nv
	note_system varchar(200) NULL, -- note hệ thống
	impact int2 NULL, -- số lần chỉnh sửa phiếu
	report_ship bool NULL, -- đơn hàng bị tố cáo
	queue_bill bool NULL, -- đơn hàng chưa đc duyệt, trên hàng chờ
	note_report varchar(500) NULL, -- ghi chú tố cáo
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT bill_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_bill" FOREIGN KEY (customers_id) REFERENCES public.customers(id) ON UPDATE CASCADE,
	CONSTRAINT "FK2_bill" FOREIGN KEY (branch_id) REFERENCES public.branch(id) ON UPDATE CASCADE,
	CONSTRAINT "FK3_bill" FOREIGN KEY (shipping_method_id) REFERENCES public.shipping_method(id)
);

-- Column comments

COMMENT ON COLUMN public.bill.code_bill IS 'mã hóa đơn';
COMMENT ON COLUMN public.bill.staff_id IS 'mã nhân viên';
COMMENT ON COLUMN public.bill.customers_id IS 'mã kh';
COMMENT ON COLUMN public.bill.branch_id IS 'mã chi nhánh';
COMMENT ON COLUMN public.bill.payment_methods_id IS 'id phương thức thanh toán';
COMMENT ON COLUMN public.bill.shipping_method_id IS 'id pt nhận hàng';
COMMENT ON COLUMN public.bill.online_payment_id IS 'id ngân hàng thanh toán';
COMMENT ON COLUMN public.bill.list_products IS 'ds sp';
COMMENT ON COLUMN public.bill.initial_amount IS 'số tiền gốc';
COMMENT ON COLUMN public.bill.actual_amount IS 'số tiền phải trả';
COMMENT ON COLUMN public.bill.giftcode_id IS 'id mã giảm giá';
COMMENT ON COLUMN public.bill.successful_payment IS 'đã thanh toán';
COMMENT ON COLUMN public.bill.note_staff IS 'ghi chú cho nv';
COMMENT ON COLUMN public.bill.note_system IS 'note hệ thống';
COMMENT ON COLUMN public.bill.impact IS 'số lần chỉnh sửa phiếu';
COMMENT ON COLUMN public.bill.report_ship IS 'đơn hàng bị tố cáo';
COMMENT ON COLUMN public.bill.queue_bill IS 'đơn hàng chưa đc duyệt, trên hàng chờ';
COMMENT ON COLUMN public.bill.note_report IS 'ghi chú tố cáo';

-- Permissions

ALTER TABLE public.bill OWNER TO postgres;
GRANT ALL ON TABLE public.bill TO postgres;


-- public.comments_product definition

-- Drop table

-- DROP TABLE public.comments_product;

CREATE TABLE public.comments_product (
	id serial4 NOT NULL,
	product_id int4 NOT NULL, -- mã sp
	customers_id int4 NOT NULL, -- tên kh bình luận
	comments_product_id int4 NOT NULL, -- mã bình luận¶= id của chính nó thì là bình luận main¶= id của comment khác thì là comment con của comment khác
	vote int4 NULL, -- bình chọn
	"comment" varchar(500) NULL, -- thông tin cm
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT comments_product_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_comment+product" FOREIGN KEY (product_id) REFERENCES public.products(id),
	CONSTRAINT "FK2_comment_product" FOREIGN KEY (customers_id) REFERENCES public.customers(id),
	CONSTRAINT "FK3_comment_product" FOREIGN KEY (comments_product_id) REFERENCES public.comments_product(id)
);
COMMENT ON TABLE public.comments_product IS 'bình luận sp';

-- Column comments

COMMENT ON COLUMN public.comments_product.product_id IS 'mã sp';
COMMENT ON COLUMN public.comments_product.customers_id IS 'tên kh bình luận';
COMMENT ON COLUMN public.comments_product.comments_product_id IS 'mã bình luận
= id của chính nó thì là bình luận main
= id của comment khác thì là comment con của comment khác';
COMMENT ON COLUMN public.comments_product.vote IS 'bình chọn';
COMMENT ON COLUMN public.comments_product."comment" IS 'thông tin cm';

-- Permissions

ALTER TABLE public.comments_product OWNER TO postgres;
GRANT ALL ON TABLE public.comments_product TO postgres;


-- public.depot_ticket definition

-- Drop table

-- DROP TABLE public.depot_ticket;

CREATE TABLE public.depot_ticket (
	id serial4 NOT NULL,
	ticket_code varchar(20) NOT NULL, -- mã phiếu
	staff_id_export int4 NULL, -- nv  gửi
	staff_id_receive int4 NULL, -- nv nhận
	import_products int4 NULL, -- sp nhập
	export_products int4 NULL, -- sp xuất
	total_money int4 NOT NULL, -- tổng tiền
	type_of_ticket bool NOT NULL, -- 0: phiếu xuất¶1: phiếu nhập
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT depot_ticket_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_depot_ticket" FOREIGN KEY (staff_id_export) REFERENCES public.staff(id) ON UPDATE CASCADE,
	CONSTRAINT "FK2_depot_ticket" FOREIGN KEY (staff_id_receive) REFERENCES public.staff(id) ON UPDATE CASCADE
);
COMMENT ON TABLE public.depot_ticket IS 'phiếu kho';

-- Column comments

COMMENT ON COLUMN public.depot_ticket.ticket_code IS 'mã phiếu';
COMMENT ON COLUMN public.depot_ticket.staff_id_export IS 'nv  gửi';
COMMENT ON COLUMN public.depot_ticket.staff_id_receive IS 'nv nhận';
COMMENT ON COLUMN public.depot_ticket.import_products IS 'sp nhập';
COMMENT ON COLUMN public.depot_ticket.export_products IS 'sp xuất';
COMMENT ON COLUMN public.depot_ticket.total_money IS 'tổng tiền';
COMMENT ON COLUMN public.depot_ticket.type_of_ticket IS '0: phiếu xuất
1: phiếu nhập';

-- Permissions

ALTER TABLE public.depot_ticket OWNER TO postgres;
GRANT ALL ON TABLE public.depot_ticket TO postgres;


-- public.giftcode definition

-- Drop table

-- DROP TABLE public.giftcode;

CREATE TABLE public.giftcode (
	id serial4 NOT NULL,
	staff_id int4 NOT NULL, -- mã nhân viên tạo mã giảm giá
	"name" varchar(50) NULL, -- tên mẫ
	"content" varchar(500) NULL, -- nội dung
	img varchar(50) NULL, -- ảnh mã
	discount varchar(50) NULL, -- số giảm giá (% hoặc trực tiêp tiền)
	start_time timestamp NULL, -- thời gian bắt đầu
	end_time timestamp NULL, -- thời gian kết thúc
	number_of_participants int4 NULL, -- số người đã tham gia
	used int4 NULL, -- số người đã dùng
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	"limit" int4 NULL DEFAULT 0, -- giới hạn lượt sử dụng
	CONSTRAINT giftcode_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_gifcode" FOREIGN KEY (staff_id) REFERENCES public.staff(id)
);
COMMENT ON TABLE public.giftcode IS 'mã giảm giá';

-- Column comments

COMMENT ON COLUMN public.giftcode.staff_id IS 'mã nhân viên tạo mã giảm giá';
COMMENT ON COLUMN public.giftcode."name" IS 'tên mẫ';
COMMENT ON COLUMN public.giftcode."content" IS 'nội dung';
COMMENT ON COLUMN public.giftcode.img IS 'ảnh mã';
COMMENT ON COLUMN public.giftcode.discount IS 'số giảm giá (% hoặc trực tiêp tiền)';
COMMENT ON COLUMN public.giftcode.start_time IS 'thời gian bắt đầu';
COMMENT ON COLUMN public.giftcode.end_time IS 'thời gian kết thúc';
COMMENT ON COLUMN public.giftcode.number_of_participants IS 'số người đã tham gia';
COMMENT ON COLUMN public.giftcode.used IS 'số người đã dùng';
COMMENT ON COLUMN public.giftcode."limit" IS 'giới hạn lượt sử dụng';

-- Permissions

ALTER TABLE public.giftcode OWNER TO postgres;
GRANT ALL ON TABLE public.giftcode TO postgres;


-- public.news definition

-- Drop table

-- DROP TABLE public.news;

CREATE TABLE public.news (
	id serial4 NOT NULL,
	sub_menu_id int4 NOT NULL, -- thuộc menu nào
	staff_id int4 NOT NULL, -- nhân viên đăng
	"name" varchar(200) NULL, -- tên bài viết
	img_main varchar(50) NULL, -- ảnh chính
	"content" varchar(1000) NULL,
	tag varchar(100) NULL, -- thẻ bài viết
	"views" int4 NULL, -- lượng người đẫ xem
	likes int4 NULL, -- lượng người like bài viết
	"comment" int4 NULL, -- lượng người bình luận
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT news_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_news" FOREIGN KEY (sub_menu_id) REFERENCES public.sub_menu(id) ON UPDATE CASCADE,
	CONSTRAINT "FK2_news" FOREIGN KEY (staff_id) REFERENCES public.staff(id)
);
COMMENT ON TABLE public.news IS 'tin tức';

-- Column comments

COMMENT ON COLUMN public.news.sub_menu_id IS 'thuộc menu nào';
COMMENT ON COLUMN public.news.staff_id IS 'nhân viên đăng';
COMMENT ON COLUMN public.news."name" IS 'tên bài viết';
COMMENT ON COLUMN public.news.img_main IS 'ảnh chính';
COMMENT ON COLUMN public.news.tag IS 'thẻ bài viết';
COMMENT ON COLUMN public.news."views" IS 'lượng người đẫ xem';
COMMENT ON COLUMN public.news.likes IS 'lượng người like bài viết';
COMMENT ON COLUMN public.news."comment" IS 'lượng người bình luận';

-- Permissions

ALTER TABLE public.news OWNER TO postgres;
GRANT ALL ON TABLE public.news TO postgres;


-- public.price_difference definition

-- Drop table

-- DROP TABLE public.price_difference;

CREATE TABLE public.price_difference (
	id serial4 NOT NULL,
	staff_id int4 NULL, -- mã nv
	product_id int4 NOT NULL, -- mã sp
	import_price int4 NULL, -- giá nhập
	export_price int4 NULL, -- giá xuất
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT price_difference_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_price_difference" FOREIGN KEY (staff_id) REFERENCES public.staff(id),
	CONSTRAINT "FK2_price_difference" FOREIGN KEY (product_id) REFERENCES public.products(id)
);
COMMENT ON TABLE public.price_difference IS 'theo dõi sự chênh lệnh giá';

-- Column comments

COMMENT ON COLUMN public.price_difference.staff_id IS 'mã nv';
COMMENT ON COLUMN public.price_difference.product_id IS 'mã sp';
COMMENT ON COLUMN public.price_difference.import_price IS 'giá nhập';
COMMENT ON COLUMN public.price_difference.export_price IS 'giá xuất';

-- Permissions

ALTER TABLE public.price_difference OWNER TO postgres;
GRANT ALL ON TABLE public.price_difference TO postgres;


-- public.reports definition

-- Drop table

-- DROP TABLE public.reports;

CREATE TABLE public.reports (
	id serial4 NOT NULL,
	customers_id int4 NOT NULL, -- mã kh
	staff_id int4 NOT NULL, -- tên nv phản hồi
	sub_report int4 NOT NULL, -- =id của chính nó thì là report main¶=id khác của id nó thì là sub report
	type_report_id int4 NOT NULL, -- loại tố cáo
	processed bool NULL DEFAULT false, -- đã giải quyết
	report_source_id int4 NOT NULL, -- thuộc nguồn
	"content" varchar(500) NULL, -- nội dung tố cáo
	feed_back_content varchar(500) NULL, -- nội dung phản hồi
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT reports_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_reports" FOREIGN KEY (customers_id) REFERENCES public.customers(id),
	CONSTRAINT "FK2_reports" FOREIGN KEY (staff_id) REFERENCES public.staff(id),
	CONSTRAINT "FK3_reports" FOREIGN KEY (sub_report) REFERENCES public.reports(id),
	CONSTRAINT "FK4_reports" FOREIGN KEY (type_report_id) REFERENCES public.type_report(id),
	CONSTRAINT "FK5_reports" FOREIGN KEY (report_source_id) REFERENCES public.report_source(id)
);
COMMENT ON TABLE public.reports IS 'ds tố cáo . phản hồi tiêu cực';

-- Column comments

COMMENT ON COLUMN public.reports.customers_id IS 'mã kh';
COMMENT ON COLUMN public.reports.staff_id IS 'tên nv phản hồi';
COMMENT ON COLUMN public.reports.sub_report IS '=id của chính nó thì là report main
=id khác của id nó thì là sub report';
COMMENT ON COLUMN public.reports.type_report_id IS 'loại tố cáo';
COMMENT ON COLUMN public.reports.processed IS 'đã giải quyết';
COMMENT ON COLUMN public.reports.report_source_id IS 'thuộc nguồn';
COMMENT ON COLUMN public.reports."content" IS 'nội dung tố cáo';
COMMENT ON COLUMN public.reports.feed_back_content IS 'nội dung phản hồi';

-- Permissions

ALTER TABLE public.reports OWNER TO postgres;
GRANT ALL ON TABLE public.reports TO postgres;


-- public.comments_news definition

-- Drop table

-- DROP TABLE public.comments_news;

CREATE TABLE public.comments_news (
	id serial4 NOT NULL,
	news_id int4 NOT NULL, -- thuộc tin tức
	customers_id int4 NOT NULL, -- của kh
	comment_id int4 NOT NULL, -- thuộc id con nào¶=id chính nó thì cm main¶=id khác thì là sub của cm đó
	"comment" varchar(200) NULL, -- bluan
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT comments_news_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_comments_news" FOREIGN KEY (news_id) REFERENCES public.news(id),
	CONSTRAINT "FK2_comments_news" FOREIGN KEY (customers_id) REFERENCES public.customers(id),
	CONSTRAINT "FK3_comments_news" FOREIGN KEY (comment_id) REFERENCES public.comments_news(id)
);
COMMENT ON TABLE public.comments_news IS 'bình luận tin tức';

-- Column comments

COMMENT ON COLUMN public.comments_news.news_id IS 'thuộc tin tức';
COMMENT ON COLUMN public.comments_news.customers_id IS 'của kh';
COMMENT ON COLUMN public.comments_news.comment_id IS 'thuộc id con nào
=id chính nó thì cm main
=id khác thì là sub của cm đó';
COMMENT ON COLUMN public.comments_news."comment" IS 'bluan';

-- Permissions

ALTER TABLE public.comments_news OWNER TO postgres;
GRANT ALL ON TABLE public.comments_news TO postgres;


-- public.img_news definition

-- Drop table

-- DROP TABLE public.img_news;

CREATE TABLE public.img_news (
	id serial4 NOT NULL,
	news_id int4 NOT NULL DEFAULT 0, -- của tin tức nào
	"name" varchar(50) NULL,
	img varchar(50) NULL, -- link ảnh
	"location" int4 NULL, -- vị trí ưu tiên
	status bool NULL DEFAULT true,
	created_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamp NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT img_news_pkey PRIMARY KEY (id),
	CONSTRAINT "FK1_img_news" FOREIGN KEY (news_id) REFERENCES public.news(id)
);
COMMENT ON TABLE public.img_news IS 'ảnh tin tức';

-- Column comments

COMMENT ON COLUMN public.img_news.news_id IS 'của tin tức nào';
COMMENT ON COLUMN public.img_news.img IS 'link ảnh';
COMMENT ON COLUMN public.img_news."location" IS 'vị trí ưu tiên';

-- Permissions

ALTER TABLE public.img_news OWNER TO postgres;
GRANT ALL ON TABLE public.img_news TO postgres;